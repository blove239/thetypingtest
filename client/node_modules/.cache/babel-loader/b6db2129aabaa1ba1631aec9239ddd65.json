{"ast":null,"code":"import _objectSpread from\"/home/brandon/jsproj/thetypingtest/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/brandon/jsproj/thetypingtest/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,createRef,useRef,memo}from'react';import Char from'./Char';import'../css/word.css';var Word=function Word(_ref){var word=_ref.word,isCurrentWord=_ref.isCurrentWord,userInputWords=_ref.userInputWords,currentWordNum=_ref.currentWordNum,resetTestState=_ref.resetTestState,isTestActive=_ref.isTestActive;var charList=word.split('').map(function(char,i){return{char:char,style:'default',key:i};});var _useState=useState(charList),_useState2=_slicedToArray(_useState,2),chars=_useState2[0],setChars=_useState2[1];var scrollRef=createRef();var prevUserInputWordsRef=useRef();var prevCurrentWordNumRef=useRef();useEffect(function(){prevUserInputWordsRef.current=userInputWords;prevCurrentWordNumRef.current=currentWordNum;},[userInputWords,currentWordNum]);var prevUserInputWords=prevUserInputWordsRef.current;var prevCurrentWordNum=prevCurrentWordNumRef.current;var updateCharStyles=function updateCharStyles(){if(userInputWords.length<=word.length&&isTestActive){var newChars=chars.map(function(charInstance,i){var inputChar=userInputWords[i];var newChar=_objectSpread(_objectSpread({},charInstance),{},{style:'default'});if(charInstance.char===inputChar){newChar.style='correct-char';}else if(inputChar&&inputChar!==charInstance.char){newChar.style='incorrect-char';}return newChar;});setChars(newChars);}if(userInputWords.length>=word.length&&prevUserInputWords.length>userInputWords.length){setChars(function(chars){return chars.slice(0,-1);});}else if(userInputWords.length>word.length){setChars(function(chars){return chars.concat({char:userInputWords.slice(-1),style:'incorrect-char',key:chars.length});});}};useEffect(function(){if(resetTestState){setChars(charList);}if(isCurrentWord){scrollRef.current.scrollIntoView({block:'center'});}if(isCurrentWord&&prevCurrentWordNum===currentWordNum){updateCharStyles();}},[userInputWords,currentWordNum,resetTestState]);var renderChar=function renderChar(key,char,style){return/*#__PURE__*/React.createElement(Char,{key:key,style:style,char:char});};return/*#__PURE__*/React.createElement(\"li\",{ref:scrollRef,className:isCurrentWord?'current-word':'default'},chars.map(function(x){return renderChar(x.key,x.char,x.style);}));};var areEqual=function areEqual(prevProps,nextProps){if(nextProps.resetTestState){return false;}else if(nextProps.currentWordNum+1===nextProps.index){return false;}else if(nextProps.currentWordNum===nextProps.index){return false;}else if(nextProps.currentWordNum-1===nextProps.index){return false;}else{return true;}};export default memo(Word,areEqual);","map":{"version":3,"sources":["/home/brandon/jsproj/thetypingtest/src/Components/Word.js"],"names":["React","useState","useEffect","createRef","useRef","memo","Char","Word","word","isCurrentWord","userInputWords","currentWordNum","resetTestState","isTestActive","charList","split","map","char","i","style","key","chars","setChars","scrollRef","prevUserInputWordsRef","prevCurrentWordNumRef","current","prevUserInputWords","prevCurrentWordNum","updateCharStyles","length","newChars","charInstance","inputChar","newChar","slice","concat","scrollIntoView","block","renderChar","x","areEqual","prevProps","nextProps","index"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, createRef, useRef, memo } from 'react';\nimport Char from './Char';\nimport '../css/word.css';\n\nconst Word = ({ word, isCurrentWord, userInputWords, currentWordNum, resetTestState, isTestActive }) => {\n  const charList = word.split('').map((char, i) => {\n    return {\n      char: char,\n      style: 'default',\n      key: i\n    };\n  });\n  const [chars, setChars] = useState(charList);\n  const scrollRef = createRef();\n\n  const prevUserInputWordsRef = useRef();\n  const prevCurrentWordNumRef = useRef();\n  useEffect(() => {\n    prevUserInputWordsRef.current = userInputWords;\n    prevCurrentWordNumRef.current = currentWordNum;\n  }, [userInputWords, currentWordNum])\n\n  const prevUserInputWords = prevUserInputWordsRef.current;\n  const prevCurrentWordNum = prevCurrentWordNumRef.current;\n\n  const updateCharStyles = () => {\n    if (userInputWords.length <= word.length && isTestActive) {\n      const newChars = chars.map((charInstance, i) => {\n        const inputChar = userInputWords[i];\n        const newChar = {\n          ...charInstance,\n          style: 'default'\n        };\n        if (charInstance.char === inputChar) {\n          newChar.style = 'correct-char'\n        } else if (inputChar && inputChar !== charInstance.char) {\n          newChar.style = 'incorrect-char'\n        }\n        return newChar;\n      })\n      setChars(newChars);\n    }\n    if (userInputWords.length >= word.length &&\n      (prevUserInputWords.length > userInputWords.length)) {\n      setChars(chars => chars.slice(0, -1))\n    }\n    else if (userInputWords.length > word.length) {\n      setChars(chars => chars.concat({\n        char: userInputWords.slice(-1),\n        style: 'incorrect-char',\n        key: chars.length\n      }))\n    }\n  }\n\n  useEffect(() => {\n    if (resetTestState) {\n      setChars(charList);\n    }\n    if (isCurrentWord) {\n      scrollRef.current.scrollIntoView({\n        block: 'center'\n      });\n    }\n    if (isCurrentWord && prevCurrentWordNum === currentWordNum) {\n      updateCharStyles();\n    }\n  }, [userInputWords, currentWordNum, resetTestState])\n\n  const renderChar = (key, char, style) => {\n    return (\n      <Char\n        key={key}\n        style={style}\n        char={char}\n      />\n    );\n  };\n  return (\n    <li ref={scrollRef} className={(isCurrentWord) ? 'current-word' : 'default'}>\n      {chars.map(x => renderChar(x.key, x.char, x.style))}\n    </li>\n  );\n};\n\nconst areEqual = (prevProps, nextProps) => {\n  if (nextProps.resetTestState) {\n    return false;\n  }\n  else if (nextProps.currentWordNum + 1 === nextProps.index) {\n    return false;\n  }\n  else if (nextProps.currentWordNum === nextProps.index) {\n    return false;\n  }\n  else if (nextProps.currentWordNum - 1 === nextProps.index) {\n    return false\n  } else {\n    return true;\n  }\n};\n\nexport default memo(Word, areEqual);"]},"metadata":{},"sourceType":"module"}