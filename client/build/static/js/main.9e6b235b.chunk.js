(this.webpackJsonpthetypingtest=this.webpackJsonpthetypingtest||[]).push([[0],{36:function(e,t,n){},37:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){},70:function(e,t,n){},71:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){},76:function(e,t,n){"use strict";n.r(t);var c=n(0),s=n(1),r=n.n(s),a=n(8),i=n.n(a),u=(n(36),n(12)),l=n(2),o=(n(37),n(4)),j=n(6),b=function(){return Object(c.jsxs)("div",{className:"title",children:[Object(c.jsx)(o.a,{icon:j.b})," Typing"," ",Object(c.jsx)("span",{className:"page-title-bold",children:"Test"})]})},d=n(5),O=n.n(d),h=n(11),m=n(26),f=n(10),x=(n(19),n(27)),v=n.n(x),p=n(28),N=n.n(p),g=(n(68),function(){return Object(c.jsx)(f.a,{nested:!0,modal:!0,trigger:Object(c.jsxs)("button",{className:"netWPM-tooltip-button",children:[" ",Object(c.jsx)(o.a,{icon:j.c})," "]}),children:Object(c.jsx)("div",{children:" Net words per minute is determined by measuring a typist's gross speed in words per minute and subtracting any uncorrected errors made during that period."})})}),y=function(e){var t=e.wordPerMin,n=e.incorrectEntries,r=e.isTestDone,a=e.isSubmitted,i=e.setIsSubmitted,u=Object(s.useState)(null),b=Object(l.a)(u,2),d=b[0],f=b[1],x=Object(s.useState)(!1),p=Object(l.a)(x,2),y=p[0],w=p[1],S=Object(s.useState)(""),T=Object(l.a)(S,2),W=T[0],k=T[1],C=Object(s.useState)(t-n),M=Object(l.a)(C,1)[0],E=Object(s.useState)("Unknown"),I=Object(l.a)(E,2),P=I[0],D=I[1],A=Object(s.useState)(!0),R=Object(l.a)(A,2),F=R[0],L=R[1],z=Object(s.useState)(!0),J=Object(l.a)(z,2),_=J[0],B=J[1],U=Object(s.useState)(!0),V=Object(l.a)(U,2),Y=V[0],H=V[1],K=Object(s.useState)(!1),$=Object(l.a)(K,2),q=$[0],G=$[1],Q=Object(s.useState)(null),X=Object(l.a)(Q,2),Z=X[0],ee=X[1],te=Object(s.useState)(!1),ne=Object(l.a)(te,2),ce=ne[0],se=ne[1],re=new RegExp(/^[a-z\d\-_\s]+$/,"i"),ae="https://typingtest.brandonlove.ca/api/scores",ie=new v.a,ue=function(){var e=Object(h.a)(O.a.mark((function e(){var t,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(ae);case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,t&&!t.error&&(f(n),w(!0)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),se(!0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),le=function(){var e=Object(h.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.a.v4();case 3:t=e.sent,D(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),se(!0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),oe=function(){var e=Object(h.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(W.length<2||W.length>32)){e.next=5;break}L(!1),e.next=28;break;case 5:if(!0===re.test(W)||""===W){e.next=9;break}B(!1),e.next=28;break;case 9:if(!ie.isProfane(W)){e.next=13;break}H(!1),e.next=28;break;case 13:return n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:W,netWPM:M,location:"Unknown",mobile:m.isMobile,ip:P})},G(!0),w(!1),e.prev=16,e.next=19,fetch(ae,n).then((function(e){return e.json()})).then((function(e){ee(e)}));case 19:return e.next=21,ue();case 21:G(!1),i(!0),e.next=28;break;case 25:e.prev=25,e.t0=e.catch(16),i(!1);case 28:case"end":return e.stop()}}),e,null,[[16,25]])})));return function(t){return e.apply(this,arguments)}}();Object(s.useEffect)((function(){ue(),le()}),[]);var je=Object(s.useRef)();return Object(s.useEffect)((function(){void 0!==je.current&&je.current.scrollIntoView({})}),[a]),Object(c.jsxs)("div",{className:"leaderboard-popup",children:[!a&&r?Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)("div",{className:"row ",children:[Object(c.jsxs)("div",{className:"column",children:[Object(c.jsx)("h2",{className:"leaderboard-sub-heading",children:"Submit your result"}),Object(c.jsx)("span",{className:"leaderboard-sub-heading",children:"Enter your name below to submit your result"}),Object(c.jsxs)("form",{onSubmit:oe,children:[Object(c.jsx)("input",{className:"name-input leaderboard-sub-heading",placeholder:"Your Name",type:"text",value:W,onChange:function(e){return k(e.target.value)}}),Object(c.jsx)("button",{type:"submit",className:"submit-button",disabled:q,children:Object(c.jsx)(o.a,{icon:j.a})}),F?null:Object(c.jsx)("div",{className:"name-valid-warning",children:"Names must be at least two characters and no more than 32 characters in length"}),_?null:Object(c.jsx)("div",{className:"name-valid-warning",children:"Names may only contain alphanumerical characters, space, _ or -"}),Y?null:Object(c.jsx)("div",{className:"name-valid-warning",children:"Names may not contain profanities."})]})]}),Object(c.jsx)("div",{className:"column",children:Object(c.jsx)("div",{className:"stat-container",children:Object(c.jsxs)("div",{className:"stat-boxes",children:[Object(c.jsx)("div",{className:"stat-heading",children:"Your Result"}),M,Object(c.jsx)("div",{className:"align-right",children:"Net WPM"})]})})})]})}):null,Object(c.jsx)("h1",{className:"leaderboard-heading",children:"Leaderboard"}),ce?Object(c.jsx)("div",{children:"Cannot connect to the leaderboard, please try again later! "}):null,Object(c.jsx)("table",{className:"leaderboard-results",children:Object(c.jsxs)("tbody",{children:[Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{className:"table-col-1",children:"Position"}),Object(c.jsx)("th",{className:"table-col-2",children:"Name"}),Object(c.jsxs)("th",{className:"table-col-3",children:["Net WPM ",Object(c.jsx)(g,{})]})]}),y?d.map((function(e,t){return null!==Z&&e._id===Z.message?Object(c.jsxs)("tr",{className:"current-score",ref:je,children:[Object(c.jsx)("td",{className:"table-col-1",children:t+1}),Object(c.jsx)("td",{className:"table-col-2",children:e.name}),Object(c.jsx)("td",{className:"table-col-3",children:e.netWPM})]},t):Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{className:"table-col-1",children:t+1}),Object(c.jsx)("td",{className:"table-col-2",children:e.name}),Object(c.jsx)("td",{className:"table-col-3",children:e.netWPM})]},t)})):null]})})]})},w=(n(69),function(e){var t=e.testWords,n=e.userInputWords,r=e.currentWordNum,a=e.currentCharNum,i=e.isTestActive,u=e.isTestDone,b=e.resetTestState,d=(e.resetTest,Object(s.useState)(0)),O=Object(l.a)(d,2),h=O[0],m=O[1],x=Object(s.useState)(0),v=Object(l.a)(x,2),p=v[0],N=v[1],g=Object(s.useState)(0),w=Object(l.a)(g,2),S=w[0],T=w[1],W=Object(s.useState)(0),k=Object(l.a)(W,2),C=k[0],M=k[1],E=Object(s.useState)(0),I=Object(l.a)(E,2),P=I[0],D=I[1],A=Object(s.useState)(!1),R=Object(l.a)(A,2),F=R[0],L=R[1];Object(s.useEffect)((function(){var e=null;return i&&(e=setInterval((function(){N((function(e){return e+.05}))}),50)),function(){return clearInterval(e)}}),[p,i]),Object(s.useEffect)((function(){b&&(m(0),N(0),T(0),M(0),L(!1)),_(),B()}),[n,p,b]);var z=Object(s.useRef)();Object(s.useEffect)((function(){z.current=n[r],U()}),[n]);var J=z.current,_=function(){var e=0;n.forEach((function(n,c){for(var s=0;s<n.length;s++)n[s]!==t[c][s]&&(e+=1)})),D(e)},B=function(){var e=Math.round(S/5/(p/60));m(Number.isNaN(e)||!isFinite(e)?0:e)},U=function(){void 0===J||J.length>n[r].length||(n[r].slice(-1)===t[r][a-1]?(M(C+1),T(S+1)):T(S+1))};return Object(c.jsxs)("div",{children:[Object(c.jsx)(f.a,{open:u,modal:!0,nested:!0,className:"my-popup",trigger:Object(c.jsx)("button",{className:"leaderboard-button",children:" Leaderboard "}),children:function(e){return Object(c.jsxs)("div",{children:[Object(c.jsx)(y,{wordPerMin:h,incorrectEntries:P,isTestDone:u,isSubmitted:F,setIsSubmitted:L}),Object(c.jsx)("button",{className:"leaderboard-close",type:"submit",onClick:function(){e()},children:Object(c.jsx)(o.a,{icon:j.d})})]})}}),Object(c.jsx)("div",{className:"stat-container",children:Object(c.jsxs)("div",{className:"stat-boxes",children:[Object(c.jsx)("div",{className:"stat-heading",children:"Words Per Min."}),h]})}),Object(c.jsx)("div",{className:"stat-container",children:Object(c.jsxs)("div",{className:"stat-boxes",children:[Object(c.jsx)("div",{className:"stat-heading",children:"Accuracy"}),0===S?0:Math.round(C/S*100),Object(c.jsx)("span",{className:"percent-sign",children:"%"})]})})]})}),S=n(29),T=(n(70),function(e){var t=e.remainingTime,n=e.resetTest,s=e.resetCircle;return 0===t?Object(c.jsx)("button",{className:"reset-button",onMouseDown:function(e){e.preventDefault(),n(),s()},children:" Click Here to Start Over! "}):Object(c.jsxs)("div",{className:"timer",children:[Object(c.jsx)("div",{className:"value",children:t}),Object(c.jsx)("div",{className:"text",children:"seconds"})]})}),W=function(e){var t=e.isTestActive,n=e.testComplete,r=e.resetTest,a=(e.isTestDone,Object(s.useState)(0)),i=Object(l.a)(a,2),u=i[0],o=i[1],j=Object(s.useState)(window.matchMedia("(max-width: 768px)").matches?90:150),b=Object(l.a)(j,2),d=b[0],O=b[1];return Object(s.useEffect)((function(){function e(){window.matchMedia("(max-width: 768px)").matches?O(90):O(150)}e(),window.addEventListener("resize",e)})),Object(c.jsx)("div",{className:"timer-wrapper",children:Object(c.jsx)(S.CountdownCircleTimer,{isPlaying:t,duration:60,colors:[["#4CC053",.415],["#FFD300",.415],["#FF554c",.17]],size:d,onComplete:function(){return n()},children:Object(c.jsx)(T,{resetTest:r,resetCircle:function(){o((function(e){return e+1}))}})},u)})},k=n(18),C=(n(71),function(e){var t=e.style,n=e.char;return Object(c.jsx)("span",{className:t,children:n})}),M=(n(72),function(e){var t=e.word,n=e.isCurrentWord,r=e.userInputWords,a=e.currentWordNum,i=e.resetTestState,u=e.isTestActive,o=t.split("").map((function(e,t){return{char:e,style:"default",key:t}})),j=Object(s.useState)(o),b=Object(l.a)(j,2),d=b[0],O=b[1],h=Object(s.createRef)(),m=Object(s.useRef)(),f=Object(s.useRef)();Object(s.useEffect)((function(){m.current=r,f.current=a}),[r,a]);var x=m.current,v=f.current;Object(s.useEffect)((function(){i&&O(o),n&&h.current.scrollIntoView({block:"center"}),n&&v===a&&function(){if(r.length<=t.length&&u){var e=d.map((function(e,t){var n=r[t],c=Object(k.a)(Object(k.a)({},e),{},{style:"default"});return e.char===n?c.style="correct-char":n&&n!==e.char&&(c.style="incorrect-char"),c}));O(e)}r.length>=t.length&&x.length>r.length?O((function(e){return e.slice(0,-1)})):r.length>t.length&&O((function(e){return e.concat({char:r.slice(-1),style:"incorrect-char",key:e.length})}))}()}),[r,a,i]);return Object(c.jsx)("li",{ref:h,className:n?"current-word li-word":"default li-word",children:d.map((function(e){return t=e.key,n=e.char,s=e.style,Object(c.jsx)(C,{style:s,char:n},t);var t,n,s}))})}),E=function(e,t){return!t.resetTestState&&(t.currentWordNum+1!==t.index&&(t.currentWordNum!==t.index&&t.currentWordNum-1!==t.index))},I=Object(s.memo)(M,E),P=(n(73),function(e){var t=e.userInputWords,n=e.currentWordNum,s=e.testWords,r=e.resetTestWords,a=e.isTestActive;return Object(c.jsx)("div",{className:"wordlist-wrapper",children:s.map((function(e,s){return function(e,s,i){return Object(c.jsx)(I,{index:e,word:s,isCurrentWord:i,currentWordNum:n,resetTestState:r,userInputWords:t[n],isTestActive:a},e)}(s,e,s===n)}))})}),D=(n(74),n(30)),A=function(){return Object(c.jsxs)("div",{className:"page-footer",children:[Object(c.jsx)("a",{href:"https://github.com/blove239/thetypingtest",children:Object(c.jsx)(o.a,{icon:D.a})})," ","/ Made by"," ",Object(c.jsx)("a",{href:"http://brandonlove.ca",children:"Brandon Love."})]})},R=n(17),F=n.n(R),L=(n(75),function(){var e=Object(s.useState)(0),t=Object(l.a)(e,2),n=t[0],r=t[1],a=Object(s.useState)(0),i=Object(l.a)(a,2),o=i[0],j=i[1],d=Object(s.useState)([""]),O=Object(l.a)(d,2),h=O[0],m=O[1],f=Object(s.useState)(""),x=Object(l.a)(f,2),v=x[0],p=x[1],N=Object(s.useState)(F()({exactly:250})),g=Object(l.a)(N,2),y=g[0],S=g[1],T=Object(s.useState)(!1),k=Object(l.a)(T,2),C=k[0],M=k[1],E=Object(s.useState)(!1),I=Object(l.a)(E,2),D=I[0],R=I[1],L=Object(s.useState)(!1),z=Object(l.a)(L,2),J=z[0],_=z[1],B=Object(s.useRef)(null);return Object(c.jsxs)("div",{onClick:function(){B.current.focus()},className:"app",children:[Object(c.jsx)("input",{className:"input",ref:B,onKeyDown:function(e){8===e.keyCode&&function(){if(h.length>1&&0===h[n].length)m(h.slice(0,-1)),r(n-1),j(h.slice(0,-1).length);else if(h[n].length>0){j(o-1);var e=Object(u.a)(h);e[n]=e[n].slice(0,-1),m(e)}}()},onChange:function(e){C||(M(!0),_(!1));var t=e.target.value[e.target.value.length-1];e.target.value.length>v.length&&(" "===t?y[n].length<=h[n].length&&(m([].concat(Object(u.a)(h),[""])),r(n+1),j(0)):function(e){j(o+1);var t=Object(u.a)(h);t[n]=t[n].concat(e),m(t)}(t)),p(e.target.value)},type:"text",disabled:D,autoFocus:!0}),Object(c.jsxs)("div",{className:"app-container",children:[Object(c.jsx)(b,{}),Object(c.jsx)(P,{currentWordNum:n,currentCharNum:o,testWords:y,resetTestWords:J,userInputWords:h,isTestActive:C}),Object(c.jsxs)("div",{className:"row",children:[Object(c.jsx)("div",{className:"column",children:Object(c.jsx)(W,{isTestActive:C,isTestDone:D,testComplete:function(){M(!1),R(!0)},resetTest:function(){r(0),j(0),m([""]),p(""),S(F()({exactly:250})),M(!1),R(!1),_(!0)}})}),Object(c.jsx)("div",{className:"column",children:Object(c.jsx)(w,{testWords:y,userInputWords:h,currentWordNum:n,currentCharNum:o,isTestActive:C,isTestDone:D,resetTestState:J})})]}),Object(c.jsx)(A,{})]})]})});i.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(L,{})}),document.getElementById("root"))}},[[76,1,2]]]);
//# sourceMappingURL=main.9e6b235b.chunk.js.map